# 第3章 垃圾收集器与内存分配策略

垃圾回收主要解决以下三个问题：

1. 哪些内存需要回收？
2. 什么时候回收
3. 如何回收？

## 判断对象是否存活

在堆里面存放着Java世界中几乎所有的对象实例， 垃圾收集器在对堆进行回收前， 第一件事情就是要确定这些对象之中哪些还“存活”着， 哪些已经“死去”了。

### 引用计数算法

**算法流程**：

在对象中添加一个引用计数器，每当有一个地方引用它时，计数器值加一；当引用失效时，计数器值减一；任何时刻计数器为0的对象就是不可能再被使用的。

**缺点**：

难以解决循环引用问题。即 `objA.instance = objB; objB.instance = objA;`，objA 和 objB 都不会再被访问后，它们仍然相互引用着对方，所以它们的引用计数器不为 0，将永远不能被判为不可用。

### 可达性分析算法