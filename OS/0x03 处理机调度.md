# 0x03 处理机调度

## 处理机调度的层次

调度的实质是一种资源分配，处理机调度是对处理机资源进行分配。

### 高级调度（长程调度/作业调度）

- **调度对象是作业。**

- 主要功能：决定在外存的后备队列中的哪几个作业调度到内存中，并为其创建进程，分配必要的资源，然后将其放到就绪队列。
- 主要用于多道批处理系统，在分时系统和实时系统中不设置

### 低级调度（短程调度/进程调度）

- **调度的对象是进程**
- 主要功能：根据某种算法，决定就绪队列中的哪个进程应该获得处理机，并由分派程序将处理机分配给选中的进程
- 最基本的调度算法，多道批处理，分时和实时中都存在

### 中级调度（内存调度）

- **目的**
  - 提高内存利用率和系统吞吐量
- **对象是处于挂起状态的进程**
- 当已经具有运行条件并内存有稍有空闲时，由中级调度来决定，把外存上那些已经具备运行条件的就绪进程再重新调入内存，并改为就绪态，挂到就绪队列中
- 实际上是存储器管理中的对换功能

## 调度算法的评价指标

### CPU利用率

$$
CPU的利用率=\frac {CPU有效工作时间} {CPU有效工作时间+CPU空闲时间}
$$

### 系统吞吐量

单位时间内完成作业的数量
$$
系统吞吐量=\frac {完成作业的数量}{完成作业所花费的时间}
$$

### 周转时间

从作业提交给系统开始，到作业完成为止的这段时间间隔，它包括4个部分的时间

- 在后备队列中等待作业调度的时间
- 在就绪队列中等待进程调度的时间
- 进程在CPU上执行的时间
- 进程等待I/O操作完成的时间

$$
周转时间= 作业完成时间-作业提交时间
$$

$$
平均周转时间 = \frac{各个作业的周转时间之和}{作业数}
$$

$$
带权周转时间 = \frac{作业周转时间}{作业实际运行时间}
$$

$$
平均带权周转时间 = \frac{各作业带权周转时间之和}{作业数}
$$

### 等待时间

- 进程
  - 进程建立后等待被服务的时间之和，等待I/O完成的期间其实进程也是在被服务 的，所以不计入等待时间
- 作业
  - 进程建立后的等待时间以及作业在外存后备队列中的等待时间

### 响应时间

- 用户从提出请求到首次产生响应所需要的时间

## 调度算法

### 先来先服务（FCFS）



